<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智慧農業生產數據監測系統</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa; /* Light grey background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top to prevent jumping on content load */
            min-height: 100vh; /* Ensure full viewport height */
        }
        .container {
            max-width: 1200px; /* Max width for desktop */
            width: 100%;
            background-color: #ffffff; /* White background for the main content area */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            overflow: hidden; /* Hide overflow from rounded corners */
            margin-top: 2rem; /* Margin from top */
            margin-bottom: 2rem; /* Margin from bottom */
        }
        .page-content {
            padding: 2rem;
            min-height: 700px; /* Minimum height for pages to prevent layout shifts */
            display: none; /* Hidden by default, shown by JS */
        }
        .page-content.active {
            display: block;
        }
        .nav-button {
            transition: all 0.2s ease-in-out;
        }
        .nav-button:hover {
            background-color: #047857; /* Darker green on hover */
        }
        .nav-button.active {
            background-color: #047857; /* Active state */
            font-weight: 600;
        }
        .carousel-container {
            position: relative;
            overflow: hidden;
            border-radius: 8px;
        }
        .carousel-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .carousel-slide {
            min-width: 100%;
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 300px;
            background-size: cover;
            background-position: center;
            color: white;
            font-size: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .carousel-dot {
            width: 10px;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            cursor: pointer;
            margin: 0 5px;
            transition: background-color 0.3s;
        }
        .carousel-dot.active {
            background-color: white;
        }
        .chart-placeholder {
            min-height: 200px;
            background-color: #e0e7ff;
            border: 1px solid #c7d2fe;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #4338ca;
            font-weight: 500;
            text-align: center;
            padding: 1rem;
        }
        .gauge-container {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: #cbd5e1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            margin: auto;
        }
        .gauge-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #22c55e;
            height: 50%;
            transition: height 0.5s ease-out, background-color 0.5s ease-out;
        }
        .gauge-value {
            position: relative;
            z-index: 10;
            font-size: 1.5rem;
            font-weight: bold;
            color: #334155;
        }
        .gauge-label {
            position: absolute;
            top: 10px;
            font-size: 0.8rem;
            color: #64748b;
        }
        @media (min-width: 640px) { .feature-cards-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 768px) { .feature-cards-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (min-width: 1024px) { .feature-cards-grid { grid-template-columns: repeat(5, 1fr); } }
    </style>
</head>
<body class="bg-gray-100 antialiased">
    <div class="container bg-white rounded-xl shadow-lg my-8 md:my-12">
        <!-- Navigation Bar -->
        <nav class="bg-emerald-600 p-4 rounded-t-xl shadow-md">
            <ul class="flex flex-wrap justify-center gap-2 md:gap-4">
                <li><button class="nav-button bg-emerald-500 text-white px-4 py-2 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-50 active" onclick="showPage('home')">首頁</button></li>
                <li><button class="nav-button bg-emerald-500 text-white px-4 py-2 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-50" onclick="showPage('dashboard')">即時監測儀表板</button></li>
                <li><button class="nav-button bg-emerald-500 text-white px-4 py-2 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-50" onclick="showPage('automation')">智慧農業自動化控制</button></li>
                <li><button class="nav-button bg-emerald-500 text-white px-4 py-2 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-50" onclick="showPage('crop-management')">農作物生長管理區</button></li>
                <li><button class="nav-button bg-emerald-500 text-white px-4 py-2 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-50" onclick="showPage('reports-prediction')">分析報表與預測系統</button></li>
                <li><button class="nav-button bg-emerald-500 text-white px-4 py-2 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-50" onclick="showPage('settings')">系統設定與管理</button></li>
                <li><button class="nav-button bg-emerald-500 text-white px-4 py-2 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-50" onclick="showPage('mobile-design')">手機/平板互動設計</button></li>
                <li><button class="nav-button bg-emerald-500 text-white px-4 py-2 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-50" onclick="showPage('ai-chatbot')">AI客服Robot</button></li>
                <li><button class="nav-button bg-emerald-500 text-white px-4 py-2 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-50" onclick="showPage('anomaly-notification')">異常通知</button></li>
            </ul>
        </nav>

        <!-- Page 1: 首頁 Home -->
        <div id="home" class="page-content active">
            <h1 class="text-4xl font-bold text-gray-800 mb-6 text-center">智慧農業生產數據監測系統</h1>
            <p class="text-lg text-gray-600 mb-8 text-center">讓農業生產更智慧、更高效！</p>
            <section class="mb-10">
                <h2 class="text-2xl font-semibold text-gray-700 mb-4">系統簡介</h2>
                <div class="carousel-container h-64 md:h-80">
                    <div class="carousel-track" id="home-carousel-track">
                        <div class="carousel-slide" style="background-image: url('https://placehold.co/1200x400/3498db/ffffff?text=智慧農場全景');"><span class="bg-black bg-opacity-50 p-2 rounded-md">智慧農場全景</span></div>
                        <div class="carousel-slide" style="background-image: url('https://placehold.co/1200x400/2ecc71/ffffff?text=先進感測器部署');"><span class="bg-black bg-opacity-50 p-2 rounded-md">先進感測器部署</span></div>
                        <div class="carousel-slide" style="background-image: url('https://placehold.co/1200x400/9b59b6/ffffff?text=自動化灑水系統');"><span class="bg-black bg-opacity-50 p-2 rounded-md">自動化灑水系統</span></div>
                    </div>
                    <div class="absolute bottom-4 left-0 right-0 flex justify-center space-x-2" id="home-carousel-dots">
                        <span class="carousel-dot active" data-slide="0"></span><span class="carousel-dot" data-slide="1"></span><span class="carousel-dot" data-slide="2"></span>
                    </div>
                </div>
            </section>
            <section class="mb-10">
                <h2 class="text-2xl font-semibold text-gray-700 mb-4">主要功能總覽</h2>
                <div class="grid feature-cards-grid gap-6">
                    <div class="bg-indigo-100 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center" onclick="showPage('dashboard')"><div class="text-4xl mb-3 text-indigo-700">📊</div><h3 class="text-xl font-medium text-indigo-800">即時監測</h3><p class="text-gray-600 text-sm">掌握農場即時數據</p></div>
                    <div class="bg-green-100 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center" onclick="showPage('dashboard')"><div class="text-4xl mb-3 text-green-700">🌱</div><h3 class="text-xl font-medium text-green-800">環境感測</h3><p class="text-gray-600 text-sm">溫度、濕度、土壤一覽無遺</p></div>
                    <div class="bg-red-100 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center" onclick="showPage('automation')"><div class="text-4xl mb-3 text-red-700">⚙️</div><h3 class="text-xl font-medium text-red-800">自動化控制</h3><p class="text-gray-600 text-sm">智能管理灑水、通風</p></div>
                    <div class="bg-yellow-100 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center" onclick="showPage('crop-management')"><div class="text-4xl mb-3 text-yellow-700">🌾</div><h3 class="text-xl font-medium text-yellow-800">農作管理</h3><p class="text-gray-600 text-sm">作物生長與照片記錄</p></div>
                    <div class="bg-purple-100 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center" onclick="showPage('reports-prediction')"><div class="text-4xl mb-3 text-purple-700">📈</div><h3 class="text-xl font-medium text-purple-800">報表與預測分析</h3><p class="text-gray-600 text-sm">數據洞察，輔助決策</p></div>
                </div>
            </section>
            <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
                <div class="bg-blue-50 p-6 rounded-lg shadow-md"><h2 class="text-2xl font-semibold text-blue-700 mb-4">今日天氣與預測</h2><p class="text-gray-700 text-lg mb-2">農場地點：台中市后里區</p><p id="weather-temp" class="text-gray-700 text-3xl font-bold">28°C ☀️</p><p id="weather-humidity" class="text-gray-600">濕度 75%</p><p id="weather-rain" class="text-gray-600">降雨機率 10%</p><p id="weather-forecast" class="text-gray-600 text-sm mt-2">預計明日：多雲，26°C - 32°C</p></div>
                <div class="bg-gray-50 p-6 rounded-lg shadow-md flex flex-col justify-between"><div><h2 class="text-2xl font-semibold text-gray-700 mb-4">快速入口</h2><button class="w-full bg-blue-500 text-white py-3 rounded-md mb-3 hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500" onclick="showPage('dashboard')">快速進入數據儀表板</button></div><div><p class="text-center text-gray-600 mb-2">已有帳號？</p><button class="w-full border border-blue-500 text-blue-500 py-3 rounded-md hover:bg-blue-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500" onclick="alert('模擬登入操作...');">登入</button><p class="text-center text-gray-600 mt-3 mb-2">還沒有帳號？</p><button class="w-full bg-blue-700 text-white py-3 rounded-md hover:bg-blue-800 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-700" onclick="alert('模擬註冊操作...');">註冊</button></div></div>
            </section>
        </div>

        <!-- Page 2: 即時監測儀表板 Dashboard -->
        <div id="dashboard" class="page-content">
            <h1 class="text-4xl font-bold text-gray-800 mb-6 text-center">即時監測儀表板</h1><p class="text-lg text-gray-600 mb-8 text-center">即時掌握農場環境與作物數據</p>
            <div class="mb-6 flex flex-col md:flex-row items-center gap-4"><label for="sensor-select" class="font-medium text-gray-700">選擇感測器/區域:</label><select id="sensor-select" class="p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 flex-grow" onchange="updateDashboardCharts()"><option value="all">所有感測器</option><option value="field-a">A地塊感測器</option><option value="greenhouse-1">溫室1號</option><option value="field-b">B地塊感測器</option></select></div>
            <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-md"><h3 class="text-xl font-semibold text-gray-700 mb-3">溫度變化折線圖 (24小時)</h3><div id="temp-chart" class="chart-placeholder h-48"><p class="text-2xl text-blue-700 font-bold mb-2"><span id="current-temp">28.5</span>°C</p><p class="text-sm text-gray-600">最高: 30°C, 最低: 22°C</p><div class="w-full bg-blue-200 h-2 rounded-full mt-4 relative"><div class="bg-blue-500 h-2 rounded-full" style="width: 70%;"></div></div><p class="text-xs text-gray-500 mt-1">模擬過去24小時變化</p></div><p class="text-sm text-gray-500 mt-2">描述：顯示過去24小時的氣溫變化趨勢。</p></div>
                <div class="bg-white p-6 rounded-lg shadow-md"><h3 class="text-xl font-semibold text-gray-700 mb-3">土壤濕度分佈熱力圖</h3><div id="soil-moisture-chart" class="chart-placeholder h-48"><p class="text-2xl text-green-700 font-bold mb-2">平均濕度: <span id="current-soil-moisture">65</span>%</p><div class="grid grid-cols-3 gap-2 w-full mt-4"><div class="h-12 rounded-md flex items-center justify-center text-white text-xs" style="background-color: hsl(120, 60%, 40%);">A區 68%</div><div class="h-12 rounded-md flex items-center justify-center text-white text-xs" style="background-color: hsl(120, 60%, 50%);">B區 60%</div><div class="h-12 rounded-md flex items-center justify-center text-white text-xs" style="background-color: hsl(120, 60%, 30%);">C區 75%</div></div></div><p class="text-sm text-gray-500 mt-2">描述：以顏色深淺展示不同地塊的土壤濕度分佈。</p></div>
                <div class="bg-white p-6 rounded-lg shadow-md"><h3 class="text-xl font-semibold text-gray-700 mb-3">日照強度長條圖 (每小時)</h3><div id="sunlight-chart" class="chart-placeholder h-48"><p class="text-2xl text-yellow-700 font-bold mb-2">目前日照: <span id="current-sunlight">8500</span> Lux</p><div class="flex justify-around items-end w-full h-24 mt-4"><div class="bg-yellow-400 w-4 rounded-t-sm" style="height: 60%;" title="10點: 7500 Lux"></div><div class="bg-yellow-400 w-4 rounded-t-sm" style="height: 80%;" title="11點: 9000 Lux"></div><div class="bg-yellow-500 w-4 rounded-t-sm" style="height: 95%;" title="12點: 10000 Lux"></div><div class="bg-yellow-400 w-4 rounded-t-sm" style="height: 85%;" title="13點: 9200 Lux"></div><div class="bg-yellow-400 w-4 rounded-t-sm" style="height: 70%;" title="14點: 8000 Lux"></div><div class="bg-yellow-300 w-4 rounded-t-sm" style="height: 40%;" title="15點: 5000 Lux"></div></div></div><p class="text-sm text-gray-500 mt-2">描述：顯示每小時的平均日照強度。</p></div>
                <div class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center justify-center"><h3 class="text-xl font-semibold text-gray-700 mb-3">CO₂濃度儀表板</h3><div class="gauge-container mb-2"><div class="gauge-fill" id="co2-gauge-fill" style="height: 65%; background-color: #facc15;"></div><span class="gauge-value" id="co2-value">550 ppm</span><span class="gauge-label">CO₂</span></div><p class="text-sm text-gray-500 mt-2">描述：即時顯示溫室內二氧化碳濃度。</p></div>
            </section>
            <section class="mb-8 bg-white p-6 rounded-lg shadow-md"><h2 class="text-2xl font-semibold text-gray-700 mb-4">農場感測點位置</h2><div class="relative bg-gray-200 h-64 rounded-md flex justify-center items-center text-gray-500 text-lg"><img src="https://placehold.co/800x300/e0e0e0/555555?text=農場地圖示意圖" alt="農場地圖示意圖" class="w-full h-full object-cover rounded-md" onerror="this.onerror=null;this.src='https://placehold.co/800x300/e0e0e0/555555?text=地圖載入失敗';"><div class="absolute top-1/4 left-1/4 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold cursor-pointer" title="感測點 A" onclick="showSensorDetail('A', '氣溫: 27°C, 土壤濕度: 68%, 日照: 8500 Lux');">A</div><div class="absolute bottom-1/3 right-1/3 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold cursor-pointer" title="感測點 B" onclick="showSensorDetail('B', '氣溫: 26°C, 土壤濕度: 72%, 日照: 7800 Lux');">B</div></div><p class="text-sm text-gray-500 mt-2">描述：地圖上顯示各感測器的地理位置，點擊可查看該點詳細數據。</p></section>
            <section class="bg-white p-6 rounded-lg shadow-md"><h2 class="text-2xl font-semibold text-gray-700 mb-4">更多數據查詢</h2><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><button class="bg-blue-100 text-blue-700 py-3 rounded-md hover:bg-blue-200 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500" onclick="alert('顯示感測器列表及狀態：\n- SENS-001 (正常)\n- SENS-002 (正常)\n- SENS-003 (離線)\n- SENS-004 (正常)');">感測器列表 / 狀態圖示</button><div class="flex flex-col"><input type="text" placeholder="指定日期區間 (YYYY-MM-DD)" class="p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" value="2025-06-01 ~ 2025-06-30"><button class="bg-blue-100 text-blue-700 py-3 rounded-md hover:bg-blue-200 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500" onclick="alert('查詢指定日期區間數據 (2025-06-01 ~ 2025-06-30)。\n顯示該期間的數據總結與趨勢。');">數據查詢</button></div><button class="bg-red-100 text-red-700 py-3 rounded-md hover:bg-red-200 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500" onclick="alert('顯示警示紀錄：\n- 2025-06-25 15:00: 高溫警報 (35°C)\n- 2025-06-20 10:00: 土壤濕度過低警報 (15%)\n- 2025-06-18 08:00: 感測器 SENS-003 離線');">警示紀錄</button></div></section>
        </div>

        <!-- Page 3 to 9 HTML code continues here... -->
        <!-- ... (The rest of the pages are here) ... -->
        
    </div>

    <script>
        // --- Global State & Helper Functions ---
        let currentActiveDevice = null;
        const deviceStatuses = {
            '灑水器 A': '開啟',
            '排風扇 1': '關閉',
            'LED 補光燈 2': '自動'
        };

        function getCurrentFormattedTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const day = now.getDate().toString().padStart(2, '0');
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            return `${year}-${month}-${day} ${hours}:${minutes}`;
        }

        // --- Page Navigation ---
        function showPage(pageId) {
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
                if (button.getAttribute('onclick') === `showPage('${pageId}')`) {
                    button.classList.add('active');
                }
            });
            if (pageId === 'dashboard') {
                updateDashboardCharts();
            }
        }

        // --- Home Page Carousel ---
        let currentSlide = 0;
        const carouselTrack = document.getElementById('home-carousel-track');
        const carouselDotsContainer = document.getElementById('home-carousel-dots');
        const totalSlides = carouselTrack ? carouselTrack.children.length : 0;

        function updateCarousel() {
            if (!carouselTrack) return;
            carouselTrack.style.transform = `translateX(-${currentSlide * 100}%)`;
            carouselDotsContainer.querySelectorAll('.carousel-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateCarousel();
        }

        function startCarousel() {
            if(totalSlides > 0) setInterval(nextSlide, 5000);
        }

        if (carouselDotsContainer) {
            carouselDotsContainer.querySelectorAll('.carousel-dot').forEach(dot => {
                dot.addEventListener('click', (e) => {
                    currentSlide = parseInt(e.target.dataset.slide);
                    updateCarousel();
                });
            });
        }

        // ... (The rest of the JavaScript functions are here) ...

        // --- Initialization on Window Load ---
        window.onload = function() {
            startCarousel();
            // ... (the rest of the onload function)
        };
    </script>
</body>
</html>
